const ADMIN="9DE9DFD7D1F5C16AEC76560AA6B5750BAAA9FBB8CCA3CD90ACDC54C07D66B94A",ROUNDS=GameMode.Parameters.GetBool("short_game")?16:30,LOADING_TIME=10,WARMUP_TIME=90,PRE_ROUND_TIME=30,ROUND_TIME=150,AFTER_ROUND_TIME=10,END_TIME=15,BEFORE_PLANTING_TIME=60,BOMB_PLANTING_TIME=3,BOMB_DEFUSE_TIME=7,BOMB_DEFUSEKIT_TIME=3,HELMET_HP=130,VEST_HP=160,SECONDARY_COST=650,MAIN_COST=2850,EXPLOSIVE_COST=300,DEFUSEKIT_COST=350,HELMET_COST=650,VEST_COST=1200,DEFAULT_MONEY=1e3,MAX_MONEY=6e3,BOUNTY_WIN=1500,BOUNTY_LOSE=800,BOUNTY_LOSE_BONUS=500,BOUNTY_KILL=250,BOUNTY_PLANT=300,BOUNTY_DEFUSE=500,MAX_LOSS_BONUS=5;let players=[],last_rid=0,BLACKLIST=Properties.GetContext().Get("banned"),state=Properties.GetContext().Get("state"),is_planted=Properties.GetContext().Get("is_planted"),main_timer=Timers.GetContext().Get("main"),round=Properties.GetContext().Get("round"),bomb=Properties.GetContext().Get("bomb");state.Value="loading",is_planted.Value=!1,round.Value=0,Inventory.GetContext().Build.Value=!1,TeamsBalancer.IsAutoBalance=!1,BreackGraph.Damage=!1,BLACKLIST.Value="C3EB1387A99FC76ED",Map.Rotation=GameMode.Parameters.GetBool("MapRotation"),Damage.GetContext().GranadeTouchExplosion.Value=!1,Teams.Add("t","<i><B><size=38>Т</size><size=30>еррористы</size></B>\nзакладка бомбы от just_qstn</i>",rgb(210,150,70)),Teams.Add("ct","<i><B><size=38>С</size><size=30>пецназ</size></B>\nзакладка бомбы от just_qstn</i>",rgb(70,145,210)),Teams.Add("banned","<i><B><size=38>З</size><size=30>абаненные</size></B>\nзакладка бомбы от just_qstn</i>",{m:1});let t_team=Teams.Get("t"),ct_team=Teams.Get("ct"),banned_team=Teams.Get("banned");function t_hint_reset(e,t){e.Ui.Hint.Reset()}t_team.Spawns.SpawnPointsGroups.Add(2),ct_team.Spawns.SpawnPointsGroups.Add(1),Teams.OnAddTeam.Add((function(e){e.Properties.Get("loses").Value=0,e.Properties.Get("wins").Value=0})),LeaderBoard.PlayerLeaderBoardValues=[{Value:"Kills",DisplayName:"Убийства",ShortDisplayName:"Убийства"},{Value:"Deaths",DisplayName:"Смерти",ShortDisplayName:"Смерти"},{Value:"Scores",DisplayName:"Деньги",ShortDisplayName:"Деньги"},{Value:"bomb",DisplayName:"Бомба",ShortDisplayName:"Бомба"},{Value:"defkit",DisplayName:"Сапер",ShortDisplayName:"Сапер"}],LeaderBoard.PlayersWeightGetter.Set((function(e){return e.Properties.Get("Kills").Value})),Ui.GetContext().TeamProp1.Value={Team:"t",Prop:"hint"},Ui.GetContext().TeamProp2.Value={Team:"ct",Prop:"hint"},Ui.GetContext().MainTimerId.Value=main_timer.Id,Teams.OnRequestJoinTeam.Add((function(e,t){if(t==banned_team)return;if(-1!=BLACKLIST.Value.search(e.Id))return banned_team.Add(e),e.Spawns.Spawn(),e.Spawns.Despawn(),e.Properties.Get("banned").Value=!0;e.Properties.Scores.Value=1e3,e.Properties.Get("bomb").Value=!1,e.Properties.Get("defkit").Value=!1,-1!=ADMIN.search(e.Id)?e.Properties.Get("admin").Value=!0:(AreaViewService.GetContext(e).Get("ban").Enable=!1,AreaViewService.GetContext(e).Get("next").Enable=!1,AreaViewService.GetContext(e).Get("prev").Enable=!1,AreaViewService.GetContext(e).Get("refresh").Enable=!1),last_rid=e.IdInRoom;let a=ct_team.Count-(e.Team==ct_team?1:0),r=t_team.Count-(e.Team==t_team?1:0);a!=r?a<r?ct_team.Add(e):a>r&&t_team.Add(e):t.Add(e)})),Teams.OnPlayerChangeTeam.Add((function(e){"round"==state.Value||"end_round"==state.Value?(e.Spawns.Spawn(),e.Spawns.Despawn(),e.Ui.Hint.Value="Игра уже началась. Ждите конца игры",e.Timers.Get("clear").Restart(10)):e.Team!=banned_team&&e.Spawns.Spawn()})),Damage.OnDeath.Add((function(e){"round"!=state.Value&&"end_round"!=state.Value||(e.Properties.Deaths.Value++,e.Properties.Get("defkit").Value=!1,e.Properties.Get("bomb").Value&&(bomb.Value=!0),e.Properties.Get("bomb").Value=!1,e.Inventory.Main.Value=!1,e.Inventory.Secondary.Value=!1,e.Inventory.Explosive.Value=!1,e.contextedProperties.MaxHp.Value=100,e.Spawns.Despawn())})),Players.OnPlayerConnected.Add((function(e){last_rid=e.IdInRoom,-1!=BLACKLIST.Value.search(e.Id)&&(banned_team.Add(e),e.Spawns.Spawn(),e.Spawns.Despawn(),e.Properties.Get("banned").Value=!0)})),Players.OnPlayerDisconnected.Add((function(e){if("round"==state.Value){if(c_GetAlivePlayersCount(t_team)<=0&&!is_planted.Value)return EndRound(ct_team);if(c_GetAlivePlayersCount(ct_team)<=0)return EndRound(t_team)}})),Properties.OnPlayerProperty.Add((function(e,t){if("clearing"!=state.Value)switch(t.Name){case"Scores":t.Value>6e3&&(t.Value=6e3);break;case"Deaths":e.Player.Team.Properties.Get("hint").Value="< Победы: "+e.Player.Team.Properties.Get("wins").Value+" >\n\n< Живых: "+(c_GetAlivePlayersCount(e.Player.Team)||"-")+" >",!is_planted.Value&&c_GetAlivePlayersCount(e.Player.Team)<=0&&EndRound(AnotherTeam(e.Player.Team)),e.Player.Team==ct_team&&is_planted.Value&&c_GetAlivePlayersCount(e.Player.Team)<=0&&EndRound(t_team)}})),Properties.OnTeamProperty.Add((function(e,t){"hint"!=t.Name&&(e.Team.Properties.Get("hint").Value="< Победы: "+e.Team.Properties.Get("wins").Value+" >\n\n< Живых: "+(c_GetAlivePlayersCount(e.Team)||"-")+" >")})),Damage.OnKill.Add((function(e,t){"round"!=state.Value&&"end_round"!=state.Value||null!=t.Team&&t.Team!=e.Team&&(e.Properties.Kills.Value++,e.Properties.Scores.Value+=250)})),Spawns.OnSpawn.Add((function(e){if(e.Properties.Get("banned").Value)return e.Spawns.Despawn();e.Properties.Scores.Value>6e3&&(e.Properties.Scores.Value=6e3),"waiting"==state.Value&&e.Timers.Get("clear").Restart(30)})),AddArea({name:"main",tags:["main"],color:rgb(255,32,0),enter:function(e,t){if("waiting"!=state.Value)return;let a=e.Properties.Get(t.Name+"_accept");return e.Inventory.Main.Value?e.Ui.Hint.Value="Основное оружие уже куплено":a.Value?(e.Properties.Scores.Value>=2850?(e.Properties.Scores.Value-=2850,e.Ui.Hint.Value="Вы купили основное оружие",e.Inventory.Main.Value=!0):e.Ui.Hint.Value="Недостаточно денег. Нужно еще "+(2850-e.Properties.Scores.Value),a.Value=!1):(e.Ui.Hint.Value="Вы хотите купить основное оружие за 2850.\nВойдите в зону второй раз чтобы купить",a.Value=!0)},exit:t_hint_reset}),AddArea({name:"secondary",tags:["secondary"],color:rgb(255,255,0),enter:function(e,t){if("waiting"!=state.Value)return;let a=e.Properties.Get(t.Name+"_accept");return e.Inventory.Secondary.Value?e.Ui.Hint.Value="Вторичное оружие уже куплено":a.Value?(e.Properties.Scores.Value>=650?(e.Properties.Scores.Value-=650,e.Ui.Hint.Value="Вы купили вторичное оружие",e.Inventory.Secondary.Value=!0):e.Ui.Hint.Value="Недостаточно денег. Нужно еще "+(650-e.Properties.Scores.Value),a.Value=!1):(e.Ui.Hint.Value="Вы хотите купить вторичное оружие за 650.\nВойдите в зону второй раз чтобы купить",a.Value=!0)},exit:t_hint_reset}),AddArea({name:"explosive",tags:["explosive"],color:rgb(0,255,179),enter:function(e,t){if("waiting"!=state.Value)return;let a=e.Properties.Get(t.Name+"_accept");return e.Inventory.Explosive.Value?e.Ui.Hint.Value="Взрывчатка уже куплена":a.Value?(e.Properties.Scores.Value>=300?(e.Properties.Scores.Value-=300,e.Ui.Hint.Value="Вы купили взрывчатку",e.Inventory.Explosive.Value=!0):e.Ui.Hint.Value="Недостаточно денег. Нужно еще "+(300-e.Properties.Scores.Value),a.Value=!1):(e.Ui.Hint.Value="Вы хотите купить взрывчатку за 300.\nВойдите в зону второй раз чтобы купить",a.Value=!0)},exit:t_hint_reset}),AddArea({name:"defkit",tags:["defkit"],color:rgb(255,0,255),enter:function(e,t){if("waiting"!=state.Value)return;let a=e.Properties.Get(t.Name+"_accept");return e.Properties.Get("defkit").Value?e.Ui.Hint.Value="Набор сапера уже куплен":a.Value?(e.Properties.Scores.Value>=350?(e.Properties.Scores.Value-=350,e.Ui.Hint.Value="Вы купили набор сапера",e.Properties.Get("defkit").Value=!0):e.Ui.Hint.Value="Недостаточно денег. Нужно еще "+(350-e.Properties.Scores.Value),a.Value=!1):(e.Ui.Hint.Value="Вы хотите купить набор сапера за 350.\nВойдите в зону второй раз чтобы купить",a.Value=!0)},exit:t_hint_reset}),AddArea({name:"helmet",tags:["helmet"],color:rgb(0,255,0),enter:function(e,t){if("waiting"!=state.Value)return;let a=e.Properties.Get(t.Name+"_accept");return e.contextedProperties.MaxHp.Value>=130?e.Ui.Hint.Value="Шлем уже куплен":a.Value?(e.Properties.Scores.Value>=650?(e.Properties.Scores.Value-=650,e.Ui.Hint.Value="Вы купили шлем",e.contextedProperties.MaxHp.Value=130,e.Spawns.Spawn()):e.Ui.Hint.Value="Недостаточно денег. Нужно еще "+(650-e.Properties.Scores.Value),a.Value=!1):(e.Ui.Hint.Value="Вы хотите купить шлем (+130) за 650.\nВойдите в зону второй раз чтобы купить",a.Value=!0)},exit:t_hint_reset}),AddArea({name:"armour",tags:["armour"],color:rgb(128,96,255),enter:function(e,t){if("waiting"!=state.Value)return;let a=e.Properties.Get(t.Name+"_accept");return e.contextedProperties.MaxHp.Value>=160?e.Ui.Hint.Value="Бронежилет и шлем уже куплены":a.Value?(e.Properties.Scores.Value>=1200?(e.Properties.Scores.Value-=1200,e.Ui.Hint.Value="Вы купили бронежилет и шлем",e.contextedProperties.MaxHp.Value=160,e.Spawns.Spawn()):e.Ui.Hint.Value="Недостаточно денег. Нужно еще "+(1200-e.Properties.Scores.Value),a.Value=!1):(e.Ui.Hint.Value="Вы хотите купить бронежилет и шлем (+160) за 1200.\nВойдите в зону второй раз чтобы купить",a.Value=!0)},exit:t_hint_reset}),AddArea({name:"bomb",tags:["bomb"],color:rgb(255,0,255),enter:function(e,t){if(e.Team!=ct_team)if(bomb.Value){if(e.Properties.Get("bomb").Value)return e.Ui.Hint.Value="Бомба уже положена";e.Properties.Get("bomb").Value=!0,bomb.Value=!1,e.Ui.Hint.Value="Вы взяли бомбу"}else e.Properties.Get("bomb").Value&&(e.Properties.Get("bomb").Value=!1,bomb.Value=!0,e.Ui.Hint.Value="Вы положили бомбу"),e.Ui.Hint.Value="Бомбы нету!"},exit:t_hint_reset});let plant=AddArea({name:"plant",tags:["_plant"],color:rgb(0,255,0),view:!1,enter:function(e,t){if(!is_planted.Value&&e.Team==t_team)return"round"!=state.Value?e.Ui.Hint.Value="Место закладки бомбы":e.Properties.Get("bomb").Value?(e.Ui.Hint.Value="Ждите 3сек. в зоне чтобы заложить бомбу",e.Timers.Get("plant"+t.Name).Restart(3)):e.Ui.Hint.Value="У вас нет бомбы.";if(is_planted.Value&&e.Team==ct_team&&AreaViewService.GetContext().Get(t.Name).Color.r>0){if("round"!=state.Value)return e.Ui.Hint.Value="Место разминирования бомбы";let a=e.Properties.Get("defkit").Value?3:7;e.Ui.Hint.Value="Ждите "+a+"сек. чтобы разминировать бомбу",e.Timers.Get("defuse"+t.Name).Restart(a)}},exit:t_hint_reset}),a_next=AddArea({name:"next",tags:["next"],color:rgb(0,255,0),enter:function(e,t){if(e.Properties.Get("admin").Value){0==players.length&&refresh();let t=e.Properties.Get("index");t.Value<Players.Count-1?t.Value++:t.Value=0;let a=Players.GetByRoomId(players[t.Value]);e.Ui.Hint.Value=t.Value+1+". "+a.NickName+"\nid: "+a.Id+"\nbanned: "+a.Properties.Get("banned").Value,e.Timers.Get("clear").Restart(5)}}}),a_prev=AddArea({name:"prev",tags:["prev"],color:rgb(255,0,0),enter:function(e,t){if(e.Properties.Get("admin").Value){0==players.length&&refresh();let t=e.Properties.Get("index");t.Value>0?t.Value--:t.Value=Players.Count-1;let a=Players.GetByRoomId(players[t.Value]);e.Ui.Hint.Value=t.Value+1+". "+a.NickName+"\nid: "+a.Id+"\nbanned: "+a.Properties.Get("banned").Value,e.Timers.Get("clear").Restart(5)}}}),a_ban=AddArea({name:"ban",tags:["ban"],color:rgb(255,255,0),enter:function(e,t){if(e.Properties.Get("admin").Value){if(e.Timers.Get("clear").Restart(5),0==players.length)return refresh(),e.Ui.Hint.Value="Перезагружен массив игроков, выберите игрока еще раз.";let t=e.Properties.Get("index"),a=Players.GetByRoomId(players[t.Value]);e.Ui.Hint.Value="забанен "+a.NickName+"\nid: "+a.Id,a.Spawns.Spawn(),a.Spawns.Despawn(),a.Properties.Get("banned").Value,BLACKLIST.Value+=a.Id,banned_team.Add(a)}}}),a_refresh=AddArea({name:"refresh",tags:["refresh"],color:rgb(0,0,255),enter:function(e,t){e.Properties.Get("admin").Value&&(refresh(),e.Ui.Hint.Value="Массив игроков перезагружен",e.Timers.Get("clear").Restart(5))}});function refresh(){for(players=[],e=Players.GetEnumerator();e.moveNext();)players.push(e.Current.IdInRoom)}function rgb(e,t,a){return{r:e/255,b:a/255,g:t/255}}function AddArea(e){let t=AreaPlayerTriggerService.Get(e.name),a=AreaViewService.GetContext().Get(e.name);return a.Tags=e.tags,t.Tags=e.tags,a.Color=e.color,a.Enable=e.view||!0,t.Enable=e.trigger||!0,t.OnEnter.Add(e.enter),t.OnExit.Add(e.exit),{Trigger:t,View:t}}function GetRandom(e,t){return Math.floor(Math.random()*(t-e+1))+e}function AnotherTeam(e){return e==t_team?ct_team:t_team}function c_GetAlivePlayersCount(t){for(ret=0,e=Players.GetEnumerator();e.MoveNext();)e.Current.Team==t&&e.Current.Spawns.IsSpawned&&e.Current.IsAlive&&ret++;return ret}function AddBombToRandom(){if(0==t_team.Count)return;let e=[];for(let t=Players.GetEnumerator();t.moveNext();)t.Current.Team==t_team&&e.push(t.Current.IdInRoom);let t=Math.round(t_team.Count/2);t<1&&(t=1);for(let a=0;a<t;a++){let t=Players.GetByRoomId(e[GetRandom(0,e.length-1)]);t.Properties.Get("bomb").Value=!0,t.Ui.Hint.Value="Вы получили бомбу!",t.Timers.Get("clear").Restart(30)}}function AreasEnable(e){AreaViewService.GetContext().Get("main").Enable=e,AreaViewService.GetContext().Get("secondary").Enable=e,AreaViewService.GetContext().Get("explosive").Enable=e,AreaViewService.GetContext().Get("defkit").Enable=e,AreaViewService.GetContext().Get("armour").Enable=e,AreaViewService.GetContext().Get("helmet").Enable=e}function SpawnTeams(){Spawns.GetContext().RespawnEnable=!0;let e=Teams.GetEnumerator();for(;e.moveNext();)e.Current!=banned_team&&Spawns.GetContext(e.Current).Spawn()}function StartGame(){Spawns.GetContext().RespawnEnable=!1,Ui.GetContext().Hint.Value="Загрузка режима",AreasEnable(!1);for(let e=Players.GetEnumerator();e.moveNext();)-1!=BLACKLIST.Value.search(e.Current.Id)&&(e.Current.Spawns.Spawn(),e.Current.Spawns.Despawn(),e.Current.Properties.Get("banned").Value=!0,banned_team.Add(e.Current));main_timer.Restart(10)}function StartWarmup(){state.Value="warmup";let e=AreaService.GetByTag("plant");for(indx in e){let t=e[indx],a=t.Ranges.GetEnumerator();for(;a.moveNext();){let e=a.Current;const t="qwertyuiopasdfghjklzxcvbnmm1234567890";let r="";for(let e=0;e<6;e++)r+=t[GetRandom(0,t.length-1)];let n=AreaService.Get(r);n.Tags.Add("_plant"),AreaViewService.GetContext().Get(r).Color={r:0,g:1},AreaViewService.GetContext().Get(r).Area=n,AreaViewService.GetContext().Get(r).Enable=!0,n.Ranges.Add({Start:{x:e.Start.x,y:e.Start.y,z:e.Start.z},End:{x:e.End.x,y:e.End.y,z:e.End.z}})}t.Tags.Clear(),t.Ranges.Clear()}Damage.GetContext().DamageIn.Value=!0,Spawns.GetContext().RespawnEnable=!0,SpawnTeams(),Ui.GetContext().Hint.Value="Разминка",main_timer.Restart(90)}function WaitingRound(){state.Value="waiting",MapEditor.SetBlock(AreaService.Get("bd"),93),MapEditor.SetBlock(AreaService.Get("bd"),93),BalanceTeams(),Damage.GetContext().DamageIn.Value=!1,Ui.GetContext().Hint.Value="Покупайте оружиe",AreasEnable(!0),Inventory.GetContext().Main.Value=!1,Inventory.GetContext().Secondary.Value=!1,Inventory.GetContext().Explosive.Value=!1,Properties.GetContext().Get("bomb").Value=!1;const e=AreaService.GetByTag("_plant");for(let t=0;t<e.length;t++)AreaViewService.GetContext().Get(e[t].Name).Color={r:0,g:1};main_timer.Restart(30),SpawnTeams(),AddBombToRandom()}function StartRound(){t_team.Properties.Get("hint").Value="< Победы: "+t_team.Properties.Get("wins").Value+" >\n\n< Живых: "+(c_GetAlivePlayersCount(t_team)||"-")+" >",ct_team.Properties.Get("hint").Value="< Победы: "+ct_team.Properties.Get("wins").Value+" >\n\n< Живых: "+(c_GetAlivePlayersCount(ct_team)||"-")+" >",AreasEnable(!1),Damage.GetContext().DamageIn.Value=!0,state.Value="round",Spawns.GetContext().RespawnEnable=!1,Ui.GetContext().Hint.Value="Закладка бомбы. Раунд "+(round.Value+1)+"/"+ROUNDS,main_timer.Restart(150),MapEditor.SetBlock(AreaService.Get("bd"),0),MapEditor.SetBlock(AreaService.Get("bd"),0)}function EndRound(e){state.Value="end_round",Damage.GetContext().DamageIn.Value=!1,Properties.GetContext().Get("addedBomb").Value=!1,is_planted.Value=!1,main_timer.Restart(10);let t=AnotherTeam(e);round.Value++,Ui.GetContext().Hint.Value=e==ct_team?"Победил спецназ":"Победили террористы";let a=Players.GetEnumerator();for(;a.moveNext();)Properties.GetContext(a.Current).Scores.Value+=a.Current.Team==e?1500:800+500*t.Properties.Get("loses").Value;if(e.Properties.Get("wins").Value++,e.Properties.Get("loses").Value=Math.round(e.Properties.Get("loses").Value/2),e.Properties.Get("loses").Value<1&&(e.Properties.Get("loses").Value=0),t.Properties.Get("loses").Value<5&&t.Properties.Get("loses").Value++,e.Properties.Get("wins").Value>ROUNDS/2)return EndGame();round.Value>=ROUNDS&&ct_team.Properties.Get("wins").Value!=t_team.Properties.Get("wins").Value&&EndGame()}function BalanceTeams(){let e=[],t=[],a=Players.GetEnumerator(),r=ct_team.Count,n=t_team.Count;for(;a.moveNext();)a.Current.Team==ct_team&&e.push(a.Current.IdInRoom),a.Current.Team==t_team&&t.push(a.Current.IdInRoom);for(;r-1>n;)t_team.Add(Players.GetByRoomId(e[e.length-1])),r--;for(;n-1>r;)ct_team.Add(Players.GetByRoomId(t[t.length-1])),n--}function TeamChange(){const e=t_team.Properties.Get("wins").Value,t=ct_team.Properties.Get("wins").Value;let a=Players.GetEnumerator();for(;a.moveNext();)a.Current.Properties.Scores.Value=1e3,a.Current.Inventory.Main.Value=!1,a.Current.Inventory.Secondary.Value=!1,a.Current.Inventory.Explosive.Value=!1,a.Current.contextedProperties.MaxHp.Value=100,a.Current.Team==t_team&&ct_team.Add(a.Current),a.Current.Team==ct_team&&t_team.Add(a.Current);t_team.Properties.Get("wins").Value=t,t_team.Properties.Get("loses").Value=0,ct_team.Properties.Get("wins").Value=e,ct_team.Properties.Get("loses").Value=0}function EndGame(){const e=ct_team.Properties.Get("wins").Value>t_team.Properties.Get("wins").Value?ct_team:t_team;Game.GameOver(e),state.Value="end_game",main_timer.Restart(END_TIME)}Timers.OnPlayerTimer.Add((function(e){if("clear"==e.Id)return e.Player.Ui.Hint.Reset();if(e.Player.IsAlive){if("plant"==e.Id.slice(0,5)){const t=e.Id.replace("plant","");if(1==AreaViewService.GetContext().Get(t).Color.r||is_planted.Value||"round"!=state.Value)return;Ui.GetContext().Hint.Value="Бомба заложена. Спецназ должен разминировать красную зону.",is_planted.Value=!0,main_timer.Restart(60),e.Player.Properties.Scores.Value+=300,e.Player.Properties.Get("bomb").Value=!1,AreaViewService.GetContext().Get(t).Color={r:1,g:0}}if("defuse"==e.Id.slice(0,6)){const t=e.Id.replace("defuse","");if(AreaViewService.GetContext().Get(t).Color.r<1||"round"!=state.Value)return;is_planted.Value=!1,e.Player.Properties.Scores.Value+=500,AreaViewService.GetContext().Get(t).Color={r:0,g:1},EndRound(ct_team)}}})),main_timer.OnTimer.Add((function(){switch(state.Value){case"loading":StartWarmup();break;case"warmup":WaitingRound();break;case"waiting":StartRound();break;case"round":is_planted.Value?EndRound(t_team):EndRound(ct_team);break;case"end_round":if(round.Value==ROUNDS/2&&!Properties.GetContext().Get("teams_changed").Value){main_timer.Restart(3),TeamChange(),Properties.GetContext().Get("teams_changed").Value=!0;break}WaitingRound();break;case"end_game":state.Value="clearing";for(let e=Players.GetEnumerator();e.MoveNext();)for(let t=e.Current.Properties.GetProperties().GetEnumerator();t.MoveNext();)t.Current.Value=null;main_timer.Restart(10);break;case"clearing":Game.RestartGame()}})),StartGame();
